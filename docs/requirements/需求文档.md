# 本地生活小程序需求文档（仿美团模式）

## 1. 产品概述

### 1.1 产品定位
面向本地生活服务的微信小程序，仿照美团本地生活模式，提供精确到包间、卡座级别的在线状态查看和预订服务。首期支持KTV、茶楼、咖啡厅三大类目，后期扩展至美容、美甲、美食等全品类本地生活服务。

### 1.2 产品价值
- **用户价值**：精准预订体验，实时查看包间/卡座状态，视频预览空间环境，到店即用无需等待
- **商户价值**：数字化空间管理，提升预订转化率，精准营销获客，降低空置率
- **平台价值**：连接本地生活服务供需，构建完整的预订-消费-返利生态闭环

### 1.3 业态规划
**第一期（MVP）**：KTV、茶楼、咖啡厅（包间/卡座预订为核心）
**第二期扩展**：美容、美甲、按摩（技师预约）
**第三期扩展**：美食餐饮（桌位预订）
**长期规划**：全品类本地生活服务平台

## 2. 目标用户

### 2.1 C 端用户
- **主要用户**：18-40岁，喜欢聚会娱乐，有线上消费习惯
- **使用场景**：朋友聚会、商务招待、节日庆祝、日常休闲
- **核心诉求**：方便预订、快速点单、优惠实惠、服务体验好

### 2.2 B 端商户
- **主要用户**：KTV门店经营者、店长、服务员
- **核心诉求**：提升效率、降低成本、增加收入、数字化管理

### 2.3 平台运营
- **核心诉求**：用户留存、交易增长、商户满意度、平台收益

## 3. 核心功能概述

### 3.1 用户端（微信小程序）
- 商户类目选择（KTV/茶楼/咖啡厅）
- 店铺列表浏览与筛选
- 包间/卡座实时状态查看
- 包间/卡座视频预览
- 精准预订与在线支付
- 到店核销与消费
- **扫码点单系统**（**新增核心功能**）
  - 二维码扫描进入点单
  - 商品浏览与选择
  - 购物车管理与下单
  - 在线支付与订单追踪
- 积分返利与抵扣系统
- 订单管理与评价反馈

### 3.2 商户端（Web后台/商户APP）
- 店铺信息与空间管理（包间/卡座）
- 空间状态实时更新
- 视频内容管理
- 预订订单管理与核销
- **商品与点单管理**（**新增核心功能**）
  - 商品目录管理（分类、价格、库存）
  - 二维码生成与管理
  - 点单订单接收与处理
  - 后厨生产任务分配
  - 服务员配送调度
- 消费返利规则设置
- 营收数据统计分析

## 4. 关键业务流程

### 4.1 预订主流程
选择商户类目 → 浏览店铺列表 → 进入店铺详情 → 查看包间/卡座列表 → 查看实时状态 → 观看空间视频 → 选择时段 → 确认预订 → 支付订金 → 预订成功 → 到店核销 → 开始消费

### 4.2 消费与返利流程
到店核销 → 开启空间使用 → 消费产生（点单/服务） → 消费结束 → 商户确认消费金额 → 系统按比例返利积分 → 积分入账 → 用户评价

### 4.3 积分使用流程
用户查看积分余额 → 新预订选择积分抵扣 → 系统计算抵扣金额 → 减免订金 → 积分余额更新

### 4.4 扫码点单完整流程（**新增核心流程**）
用户到店入座 → 扫描包间/卡座二维码 → 自动定位空间位置 → 浏览商品目录 → 选择商品加入购物车 → 确认订单信息 → 在线支付 → 支付成功 → 商户端吧台收到订单通知 → 后厨收到制作任务 → 安排服务员配送 → 商品送达确认 → 订单完成 → 用户评价

### 4.5 商户空间管理流程
商户上传空间视频 → 设置空间信息 → 实时更新状态 → 接收预订订单 → 到店核销确认 → 消费确认 → 返利设置

## 5. 详细功能需求

### 5.1 商户类目与店铺管理

#### 5.1.1 商户类目系统
- 三大首期类目：KTV、茶楼、咖啡厅
- 类目图标与描述展示
- 类目筛选与搜索功能
- 后期扩展类目预留接口（美容、美甲、美食等）

#### 5.1.2 店铺信息管理
- 店铺名称、类目归属、地址位置
- 营业时间设置（可按周设置）
- 店铺状态（营业中/暂停营业/已打烊）
- 店铺介绍、环境图片展示
- **店铺整体视频**：店内环境介绍，展示整体装修风格与氛围
- 地理位置与地图导航
- 联系电话与在线客服
- **店铺列表排序**：
  - 默认按距离排序（基于用户位置）
  - 综合排序（评分、距离、人气等权重）
  - 价格排序、评分排序
  - 支持地图模式查看店铺位置

#### 5.1.3 空间管理系统
- **包间管理**（KTV/茶楼适用）
  - 包间编号与名称
  - 包间类型（小型/中型/大型/豪华型/主题型等）
  - 容纳人数（最少/最多）
  - 设施标签（大屏幕/音响设备/麻将桌/茶台等）
  - 包间实拍视频（**核心功能**）
  - 实时状态（可预订/已预订/使用中/维护中/清洁中）
  - 价格规则（时段价/节假日价）

- **卡座管理**（咖啡厅/茶楼适用）
  - 卡座编号与区域
  - 卡座类型（窗边座/安静区/社交区等）
  - 座位数量
  - 环境特色（采光/私密性/景观等）
  - 卡座实拍视频（**核心功能**）
  - 实时状态管理

### 5.2 核心预订系统

#### 5.2.1 实时状态展示与同步
- 空间实时可用状态显示
- **状态同步机制**：
  - 用户预订成功 → 状态同步到商户端（已预订/使用中）
  - 商户端确认结算并释放 → 状态同步回C端（空闲可预订）
- 状态锁定机制确保数据一致性
- 多种状态标识（空闲可预订/已预订/使用中/维护中/清洁中）

#### 5.2.2 视频预览功能（**核心卖点**）
- **包间/卡座视频**：单个视频时长20秒，支持多角度拍摄
- **店铺整体视频**：店内环境介绍视频，展示整体装修风格
- 视频质量标准（720P以上）
- 视频自动播放与循环
- 视频加载优化与缓存
- 商户端视频上传与管理工具

#### 5.2.3 精准预订功能
- 具体到包间/卡座级别的预订
- **预订模式**：无时间限制预订（整场预订）
- 人数选择与空间匹配推荐
- 预订冲突检测与状态锁定
- 即时预订功能
- **释放机制**：必须等待商户端手动释放，才可再次预订

#### 5.2.4 预订支付系统
- 订金比例灵活设置（商户可配置0-100%）
- 积分抵扣订金功能（**核心功能**）
- 微信支付集成
- 支付安全与订单保障

#### 5.2.5 到店核销系统
- 预订码生成（二维码/数字码）
- 商户端扫码核销
- 核销状态实时同步
- 超时处理与自动释放

### 5.3 点单系统

#### 5.3.1 菜单展示
- 商品分类管理（酒水/小食/套餐等）
- 商品信息（图片、名称、价格、规格、介绍）
- 库存管理与售罄提示
- 推荐标签（热销/新品/特价等）

#### 5.3.2 购物车与下单
- 商品加购与规格选择
- 购物车商品管理
- 订单备注功能
- 起送价格设置（**【待确认】**：是否有最低消费要求？）

#### 5.3.3 价格与优惠
- 时段定价（**【待确认】**：如何设置时段价？高峰期加价规则？）
- 会员价格体系
- 积分抵扣功能（**【待确认】**：积分获取规则？抵扣比例和上限？）
- **【待澄清】**：优惠券系统是否纳入首期？

### 5.4 支付与结算

#### 5.4.1 支付方式
- 微信支付（线上）
- 到店现金/刷卡支付
- 混合支付（**【待确认】**：是否支持订金+尾款分别支付？）

#### 5.4.2 费用构成
- 商品费用
- 服务费（**【待确认】**：服务费比例如何设置？）
- 包厢使用费
- 其他费用（开瓶费等，**【待确认】**：有哪些额外费用项？）

### 5.5 消费返利积分系统（**核心功能**）

#### 5.5.1 消费返利机制
- **返利设置权限**：完全由商户端自主设置和管理
- **返利基础**：可基于总消费金额 或 特定品类消费（如酒水、服务等）
- **返利比例**：商户自定义设置（如消费100元返5-20积分不等）
- **返利对象**：预订包间/卡座的用户账户
- 实时返利到账与通知
- 返利记录详细展示与统计

#### 5.5.2 积分使用系统
- **预订订金抵扣**：积分按比例抵扣预订订金
- **跨类目使用**：KTV获得的积分可用于美容等其他类目消费
- 积分抵扣比例设置（如100积分=1元）
- **抵扣上限配置**：管理端可配置
  - 全部可抵扣（积分可抵扣100%订金）
  - 部分比例抵扣（如最多抵扣50%订金）
- 积分有效期管理
- 积分使用记录与余额查询

#### 5.5.3 会员成长体系
- 基于消费金额的会员等级
- 不同等级的积分倍率
- 会员专享预订权益
- 会员生日特权等

### 5.6 订单管理

#### 5.6.1 订单状态
- 待支付、已支付、制作中、已完成、已取消、已退款
- 订单详情查看
- 订单历史记录

#### 5.6.2 退款与售后
- 退款申请与审核
- 退款规则设置（**【待确认】**：什么情况下可以退款？时限要求？）
- 客服联系方式

### 5.7 评价系统

#### 5.7.1 评价功能
- 订单完成后评价提醒
- 评分（星级）+ 文字评价 + 图片
- 评价标签（服务好/环境棒/性价比高等）

#### 5.7.2 评价管理
- 评价审核流程：AI自动审核 + 人工审核双重机制
- 敏感词过滤
- 商户回复功能
- 评价展示规则

### 5.8 通知系统

#### 5.8.1 用户通知
- 预订成功/取消通知
- 订单状态变更通知
- 支付成功/退款通知
- **点单订单状态通知**（**新增**）
- 营销活动推送（**【待确认】**：推送频率限制？）

#### 5.8.2 商户通知
- 新订单提醒
- 预订到店提醒
- **点单订单实时通知**（**新增**）
- 退款申请通知
- 打印机对接：参考通用标准实现

### 5.9 扫码点单系统（**新增核心功能模块**）

#### 5.9.1 二维码管理系统
- **二维码生成**：为每个包间/卡座/桌位生成唯一二维码
- **二维码内容**：包含店铺ID、空间ID、空间类型等定位信息
- **二维码打印**：支持批量打印，提供标准尺寸模板
- **二维码更新**：支持重新生成和批量更换
- **扫码验证**：防止恶意扫码和跨店使用

#### 5.9.2 商品目录管理
- **商品分类管理**
  - KTV类：酒水、洋酒、啤酒、红酒、饮料、小食、零食、果盘、服务类
  - 茶楼类：茶叶、茶点、干果、轻食、茶具、服务类
  - 咖啡厅类：咖啡、饮品、轻食、甜点、简餐、服务类
- **商品信息管理**
  - 商品名称、图片、描述、规格
  - 价格设置（原价、会员价、促销价）
  - 库存管理（当前库存、预警阈值、自动补货）
  - 商品状态（有货、缺货、暂停销售、推荐）
  - 制作时间（预估准备时长）
- **商品标签系统**
  - 热销、新品、特价、推荐、限时优惠
  - 口味标签（甜、苦、辣、清淡等）
  - 适用场景（聚会、商务、情侣、家庭）

#### 5.9.3 点单流程设计
- **扫码进入**
  - 微信扫码自动识别并跳转小程序
  - 自动定位到具体包间/卡座/桌位
  - 显示空间信息和用户引导
- **商品浏览**
  - 分类导航和搜索功能
  - 商品卡片展示（图片、名称、价格、标签）
  - 商品详情页（详细描述、规格选择、用户评价）
  - 智能推荐（基于空间类型、时段、历史偏好）
- **购物车管理**
  - 商品添加/删除/修改数量
  - 规格选择（大小杯、冰度、糖度等）
  - 特殊要求备注
  - 购物车商品统计和价格计算
- **订单确认**
  - 确认配送位置（包间/卡座号）
  - 预估送达时间显示
  - 优惠券选择和积分抵扣
  - 订单备注（特殊要求、联系方式）

#### 5.9.4 支付与结算
- **支付方式**
  - 微信支付（主要方式）
  - 积分抵扣（部分或全部）
  - 优惠券减免
  - 会员折扣
- **订单生成**
  - 唯一订单号生成
  - 订单详情完整记录
  - 支付状态实时更新
  - 支付凭证生成
- **异常处理**
  - 支付失败重试机制
  - 超时订单自动取消
  - 商品缺货替换方案
  - 退款处理流程

#### 5.9.5 订单状态流转
- **订单状态定义**
  - 已下单：用户确认订单，等待支付
  - 已支付：支付成功，订单进入商户处理队列
  - 已接单：商户确认接单，开始准备商品
  - 制作中：后厨开始制作，预估完成时间
  - 配送中：服务员取货配送，实时位置追踪
  - 已送达：商品送达确认，等待用户确认
  - 已完成：用户确认收货，订单流程结束
  - 已取消：订单取消，处理退款
  - 异常订单：缺货、配送失败等异常情况
- **状态通知机制**
  - 用户端：实时推送订单状态变更
  - 商户端：新订单提醒和状态更新
  - 服务员端：配送任务通知
- **时效管理**
  - 支付时限：15分钟内完成支付
  - 接单时限：商户3分钟内确认接单
  - 制作时限：根据商品类型设定标准时间
  - 配送时限：承诺送达时间管控

#### 5.9.6 商户端订单管理
- **订单接收系统**
  - 实时订单推送（声音、震动、弹窗提醒）
  - 订单详情展示（商品清单、配送位置、用户备注）
  - 快速接单/拒单操作
  - 批量订单处理
- **库存实时同步**
  - 商品库存实时扣减
  - 缺货商品自动下架
  - 库存预警通知
  - 快速补货功能
- **订单分配管理**
  - 吧台订单（饮品、酒水）
  - 后厨订单（食物、热食）
  - 服务订单（清洁、设备维护）
  - 优先级管理（VIP客户、紧急订单）

#### 5.9.7 后厨生产管理
- **生产任务接收**
  - 后厨专用界面显示制作任务
  - 按制作时间和优先级排序
  - 制作进度实时更新
  - 完成确认功能
- **制作流程管控**
  - 标准制作时间设定
  - 制作进度跟踪
  - 质量检查节点
  - 异常情况处理（材料不足、设备故障）
- **效率优化工具**
  - 批量制作提醒（相同商品合并）
  - 制作顺序智能排序
  - 历史数据分析（制作效率统计）
  - 员工绩效跟踪

#### 5.9.8 配送调度系统
- **服务员任务分配**
  - 自动分配最近的空闲服务员
  - 配送路径优化（多订单合并配送）
  - 任务优先级管理
  - 服务员实时位置追踪
- **配送流程管控**
  - 取货确认（后厨完成制作）
  - 配送中状态更新
  - 送达确认（用户签收）
  - 配送时间统计
- **智能调度优化**
  - 服务员工作负载均衡
  - 高峰期动态调度
  - 配送效率分析
  - 客户满意度反馈

#### 5.9.9 营销与促销系统
- **优惠券系统**
  - 满减券（满100减20）
  - 折扣券（9折优惠）
  - 新人券（首单立减）
  - 时段券（夜场特惠）
- **组合套餐**
  - 酒水+小食组合
  - 下午茶套餐
  - 聚会分享套餐
  - 情侣专享套餐
- **积分营销**
  - 点单积分返利
  - 积分商城兑换
  - 积分抵扣点单费用
  - 会员等级特权
- **限时活动**
  - 每日特价
  - 节日促销
  - 清仓特卖
  - 新品试吃

#### 5.9.10 数据统计与分析
- **销售数据分析**
  - 商品销量排行
  - 销售额统计（日/周/月）
  - 客单价分析
  - 热门时段分析
- **用户行为分析**
  - 点单频次统计
  - 商品偏好分析
  - 复购率计算
  - 用户画像构建
- **运营效率分析**
  - 制作时间统计
  - 配送效率分析
  - 服务员工作量统计
  - 客户满意度评分
- **库存管理分析**
  - 商品周转率
  - 库存积压预警
  - 采购建议生成
  - 成本控制分析

## 6. 非功能性需求

### 6.1 性能要求
- 首屏加载时间 < 2秒
- 扫码进入点单 < 1.5秒
- 支付响应时间 < 3秒
- **点单系统性能要求**（**新增**）
  - 商品目录加载 < 1秒
  - 购物车操作响应 < 0.5秒
  - 订单提交处理 < 2秒
  - 实时状态同步延迟 < 3秒
- 并发支持：至少1000用户同时在线
- **高峰期性能保障**（**新增**）
  - 同时点单用户：500+
  - 订单处理能力：1000单/小时
  - 系统响应时间在高并发下仍需 < 5秒

### 6.2 可用性要求
- 系统可用性 ≥ 99.9%
- 数据备份与恢复机制
- 异常情况的降级处理

### 6.3 安全性要求
- 用户隐私保护（最小化权限申请）
- 支付安全保障
- 数据传输加密
- 防刷单和恶意攻击

### 6.4 兼容性要求
- 微信小程序平台兼容性
- 不同手机型号和系统适配
- **【待确认】**：是否需要兼容其他平台（支付宝小程序/H5等）？

## 7. 运营需求

### 7.1 数据统计
- 用户数据：注册、活跃、留存
- 订单数据：下单量、成交额、客单价
- 商户数据：门店数、订单处理效率
- 评价数据：满意度、问题反馈

### 7.2 营销活动
- **【待澄清】**：首期是否需要营销活动功能？
- 新用户优惠
- 满减活动
- 积分翻倍活动
- 节日促销

### 7.3 风控管理
- 异常订单监控
- 恶意评价识别
- 刷单行为检测

## 8. 合规要求

### 8.1 微信小程序规范
- 类目资质要求
- 功能合规性
- 内容审核标准

### 8.2 财务合规
- 发票开具：由商户承担开具责任
- 税务合规
- 资金流水记录

### 8.3 数据合规
- 用户隐私保护
- 数据安全管理
- 未成年人保护

## 9. 项目约束

### 9.1 时间约束
- **调整后的项目时间规划**（**重要变更**）
  - 第一期MVP：1.5个月（2025年10月中旬）
    - 预订功能完整实现
    - 扫码点单核心功能
    - 基础商户端管理
    - 基础订单流转
  - 第二期扩展：1个月（2025年11月中旬）
    - 高级营销功能
    - 数据分析系统
    - 运营优化工具
    - 系统性能优化
- **关键里程碑**
  - Week 2: 预订系统开发完成
  - Week 4: 扫码点单基础功能完成
  - Week 5: 商户端订单管理完成
  - Week 6: 系统集成测试和优化

### 9.2 资源约束
- 开发团队规模
- 预算限制
- 第三方服务依赖

### 9.3 技术约束
- 微信小程序平台限制
- 支付接口限制
- 服务器部署要求

## 10. 风险与挑战

### 10.1 业务风险
- 用户接受度不确定
- 商户配合度问题
- 竞争对手压力

### 10.2 技术风险
- 并发处理能力
- 数据一致性保障
- 第三方服务稳定性

### 10.3 运营风险
- 客服支持能力
- 异常情况处理
- 用户投诉处理

## 11. 成功指标

### 11.1 用户指标
- 月活跃用户数 > 10000（**【待确认】**：具体目标？）
- 用户留存率：7日 > 30%，30日 > 15%
- 用户满意度 > 4.5星

### 11.2 业务指标
- **预订业务指标**
  - 月预订订单量 > 2000单
  - 预订客单价 > 300元
  - 预订完成率 > 95%
- **点单业务指标**（**新增**）
  - 月点单订单量 > 8000单
  - 点单客单价 > 80元
  - 点单完成率 > 98%
  - 平均送达时间 < 15分钟
- **综合业务指标**
  - 总月订单量 > 10000单
  - 用户复购率 > 60%
  - 平台整体GMV增长率 > 25%

### 11.3 商户指标
- 合作商户数 > 50家
- 商户满意度 > 4.0星
- 平台交易增长率 > 20%

## 12. 后续规划

### 12.1 功能扩展
- **点单系统高级功能**（**优先扩展**）
  - 语音点单功能（KTV环境适配）
  - 批量点单和订单分享
  - 预约点单（定时配送）
  - AR菜品展示
- **业态扩展**
  - 美容美甲预约+产品销售
  - 餐饮堂食预订+点餐
  - 娱乐场所扩展（网吧、台球厅等）
- **营销升级**
  - 会员卡充值功能
  - 团购活动功能
  - 分销推广系统
  - 企业团建服务

### 12.2 平台扩展
- 支付宝小程序版本
- App版本开发
- PC端商户后台优化

### 12.3 运营优化
- AI智能推荐
- 数据分析优化
- 营销自动化

---

## 需求澄清检查清单

### 【高优先级 - 已确认】
1. ✅ 包厢类型：通过商户后台自定义
2. ✅ 订金比例：通过商户后台设置
3. 🔄 爽约和退订规则：后续完善具体时限
4. ✅ 积分获取：消费返利+活动获取，抵扣规则待明确
5. ✅ 到店核销：商户端扫码核销
6. ✅ 评价审核：AI+人工双重审核
7. ✅ 发票开具：商户承担责任
8. ✅ 打印机对接：参考通用标准
9. 🔄 项目上线：调整为分期上线（第一期2025年10月中旬）
10. ✅ **扫码点单系统**：完整的点单流程和商户端管理（**重大新增功能**）

### 【扫码点单系统 - 新增确认事项】
1. ✅ 二维码管理：每个包间/卡座/桌位独立二维码
2. ✅ 商品管理：分类目录、库存同步、价格策略
3. ✅ 订单流转：9个状态节点，完整生命周期管理
4. ✅ 多端协同：C端点单、商户端接单、后厨制作、服务员配送
5. ✅ 支付集成：微信支付 + 积分抵扣 + 优惠券
6. ✅ 实时通知：订单状态实时推送到各端
7. ✅ 智能调度：服务员自动分配和路径优化
8. ✅ 营销工具：优惠券、套餐、积分营销、限时活动
9. ✅ 数据分析：销售统计、用户行为、运营效率分析
10. 🔄 时效管理：支付15分钟、接单3分钟、标准配送时间待确认

### 【中优先级 - 建议确认】
10. 多门店管理需求
11. 地图定位功能需求
12. 营销活动功能范围
13. 第三方平台兼容性要求
14. 具体业务目标和成功指标

### 【低优先级 - 可后续确认】
15. 后续业态扩展的优先级
16. 平台扩展的时间规划
17. AI和数据分析的具体需求

---

**版本信息**：v2.0 | 创建时间：2025-09-03 | 最后更新：2025-09-04 | 状态：待最终确认

---

## 📝 版本更新日志

### v2.0 更新内容（2025-09-04）
- ✅ **重大功能新增**：完整的扫码点单系统（5.9章节）
- ✅ **核心流程扩展**：新增扫码点单完整业务流程（4.4章节）  
- ✅ **功能范围调整**：从单一预订平台扩展为预订+点单双系统
- ✅ **项目时间调整**：从1个月调整为分期实施1.5+1个月
- ✅ **性能要求更新**：增加点单系统性能指标和高并发要求
- ✅ **业务指标重定义**：分别设定预订和点单业务目标
- ✅ **技术复杂度提升**：需要支持多端实时协同和复杂订单流转

### v1.0 基础内容（2025-09-03）
- ✅ 本地生活平台产品定位
- ✅ KTV/茶楼/咖啡厅预订系统
- ✅ 视频预览和实时状态同步
- ✅ 积分返利和消费系统
- ✅ 基础商户端管理功能

---

## 📖 核心功能用户故事

### 预订系统用户故事

**用户故事1：包间预订**
> 作为一个KTV聚会组织者，我希望能够在线查看不同包间的实时状态和环境视频，以便选择最适合我们聚会人数和预算的包间。

**验收标准**：
- 能够看到所有包间的实时状态（空闲/使用中/清洁中）
- 每个包间都有20秒环境视频预览
- 可以根据人数、价格、设施筛选包间
- 能够直接在线预订并支付订金

**用户故事2：积分抵扣**
> 作为一个老用户，我希望能够使用之前消费获得的积分来抵扣新的预订订金，这样能够享受到忠诚客户的优惠。

**验收标准**：
- 在预订页面能够看到当前积分余额
- 可以选择使用积分抵扣订金
- 系统自动计算抵扣后的实际支付金额
- 积分使用后余额实时更新

### 扫码点单系统用户故事

**用户故事3：扫码点单**
> 作为一个在包间内的用户，我希望能够扫描桌上的二维码直接进入点单页面，快速浏览商品并下单，而不需要等待服务员过来。

**验收标准**：
- 扫码后自动识别当前包间位置
- 商品按分类清晰展示，有图片和价格
- 可以添加商品到购物车并修改数量
- 支持微信支付和积分抵扣

**用户故事4：订单状态追踪**
> 作为一个下单的用户，我希望能够实时了解订单的制作和配送进度，知道大概什么时候能够收到商品。

**验收标准**：
- 支付成功后能看到订单状态
- 当订单状态变更时收到微信通知
- 能够看到预估送达时间
- 可以在订单页面查看详细进度

**用户故事5：智能推荐**
> 作为一个不知道点什么的用户，我希望系统能够根据我们的包间类型和当前时段推荐一些热门或适合的商品。

**验收标准**：
- 在商品列表顶部显示推荐商品
- 推荐理由清晰（热销、适合聚会、时段特惠等）
- 推荐商品与当前场景相关
- 可以一键添加推荐套餐到购物车

### 商户端用户故事

**用户故事6：订单管理**
> 作为一个KTV前台，我希望能够及时收到新的点单订单通知，快速查看订单详情并安排制作和配送。

**验收标准**：
- 新订单有声音和弹窗提醒
- 能够清楚看到订单商品、数量、配送包间
- 可以快速接单或拒单（缺货等原因）
- 能够分配给后厨和服务员

**用户故事7：库存管理**
> 作为一个商户管理员，我希望能够实时查看商品库存，当库存不足时及时收到预警，避免客户下单后无法供应。

**验收标准**：
- 能够查看所有商品的当前库存
- 库存低于预警值时自动提醒
- 缺货商品自动在客户端下架
- 可以快速更新库存数量

**用户故事8：数据分析**
> 作为一个店长，我希望能够看到详细的销售数据分析，了解哪些商品最受欢迎，哪些时段销量最好，以便优化经营策略。

**验收标准**：
- 能够查看日/周/月的销售报表
- 可以看到商品销量排行榜
- 能够分析不同时段的销售情况
- 可以导出数据报表

### 后厨端用户故事

**用户故事9：制作任务管理**
> 作为一个后厨工作人员，我希望能够清楚地看到需要制作的订单任务，按照优先级和制作时间合理安排工作。

**验收标准**：
- 制作任务按时间和优先级排序显示
- 能够看到每个订单的详细商品和要求
- 可以标记制作进度（开始制作/制作完成）
- 完成后自动通知服务员取货

### 服务员端用户故事

**用户故事10：配送任务**
> 作为一个服务员，我希望能够收到明确的配送任务，知道要送什么商品到哪个包间，并能够确认送达完成。

**验收标准**：
- 能够接收到配送任务通知
- 清楚显示商品清单和目标包间
- 可以标记开始配送和送达完成
- 系统自动计算最优配送路径

### 营销系统用户故事

**用户故事11：优惠券使用**
> 作为一个用户，我希望能够在点单时使用我拥有的优惠券，享受满减或折扣优惠。

**验收标准**：
- 在结算页面能够看到可用优惠券
- 系统自动筛选适用的优惠券
- 能够预览使用优惠券后的价格
- 优惠券使用后自动失效

**用户故事12：组合套餐**
> 作为一个聚会组织者，我希望能够购买适合多人的组合套餐，比购买单品更优惠更方便。

**验收标准**：
- 能够看到针对不同人数的套餐推荐
- 套餐价格明显低于单品组合价格
- 可以在套餐基础上增减部分商品
- 套餐商品清单清楚展示
